<div class="dashboard-container">
  <mat-toolbar color="primary" class="toolbar">
    <span>Flashcard App</span>
    <span class="spacer"></span>
    <button mat-icon-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon>
    </button>
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item routerLink="/profile">
        <mat-icon>person</mat-icon>
        <span>Profile</span>
      </button>
      <button mat-menu-item routerLink="/stats">
        <mat-icon>analytics</mat-icon>
        <span>Statistics</span>
      </button>
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </mat-toolbar>

  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav #drawer class="sidenav" fixedInViewport>
      <mat-nav-list>
        <a mat-list-item routerLink="/dashboard" routerLinkActive="active">
          <mat-icon matListItemIcon>dashboard</mat-icon>
          <span matListItemTitle>Dashboard</span>
        </a>
        <a mat-list-item routerLink="/stacks" routerLinkActive="active">
          <mat-icon matListItemIcon>library_books</mat-icon>
          <span matListItemTitle>My Stacks</span>
        </a>
        <a mat-list-item routerLink="/stats" routerLinkActive="active">
          <mat-icon matListItemIcon>analytics</mat-icon>
          <span matListItemTitle>Statistics</span>
        </a>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content>
      <div class="content">
        <div class="welcome-section">
          <h1>Welcome back, {{ currentUser?.firstName }}!</h1>
          <p>Ready to continue your learning journey?</p>
        </div>

        <div class="stats-grid" *ngIf="userStats">
          <mat-card class="stat-card">
            <mat-card-content>
              <div class="stat-content">
                <mat-icon class="stat-icon">library_books</mat-icon>
                <div class="stat-info">
                  <h3>{{ userStats.overview.totalStacks }}</h3>
                  <p>Total Stacks</p>
                </div>
              </div>
            </mat-card-content>
          </mat-card>

          <mat-card class="stat-card">
            <mat-card-content>
              <div class="stat-content">
                <mat-icon class="stat-icon">style</mat-icon>
                <div class="stat-info">
                  <h3>{{ userStats.overview.totalCards }}</h3>
                  <p>Total Cards</p>
                </div>
              </div>
            </mat-card-content>
          </mat-card>

          <mat-card class="stat-card">
            <mat-card-content>
              <div class="stat-content">
                <mat-icon class="stat-icon">trending_up</mat-icon>
                <div class="stat-info">
                  <h3>{{ userStats.overview.overallAccuracy }}%</h3>
                  <p>Accuracy</p>
                </div>
              </div>
            </mat-card-content>
          </mat-card>

          <mat-card class="stat-card">
            <mat-card-content>
              <div class="stat-content">
                <mat-icon class="stat-icon">local_fire_department</mat-icon>
                <div class="stat-info">
                  <h3>{{ userStats.overview.studyStreak }}</h3>
                  <p>Day Streak</p>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

        <div class="quick-actions">
          <h2>Quick Actions</h2>
          <div class="action-buttons">
            <button mat-raised-button color="primary" routerLink="/stacks">
              <mat-icon>add</mat-icon>
              Create New Stack
            </button>
            <button mat-raised-button color="accent" routerLink="/stacks">
              <mat-icon>library_books</mat-icon>
              View All Stacks
            </button>
          </div>
        </div>

        <div class="recent-activity" *ngIf="userStats?.recentActivity.recentStacks.length">
          <h2>Recent Activity</h2>
          <div class="activity-list">
            <mat-card *ngFor="let stack of userStats.recentActivity.recentStacks" class="activity-card">
              <mat-card-content>
                <h4>{{ stack.title }}</h4>
                <p>Last studied: {{ stack.lastStudied | date:'short' }}</p>
                <p>Total studied: {{ stack.totalStudied }} times</p>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
